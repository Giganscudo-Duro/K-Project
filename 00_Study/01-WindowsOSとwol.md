


# Wake on Lan とは


# Windows 10 の WoL

## システムの電源状態と



## スリープ・休止・電源オフをの設定手順と実行手順
- スリープ
    - 設定手順  
        [コントロールパネル > ハードウェアとサウンド > 電源オプション > 電源ボタンの動作を選択する] を選択する。  
        [電源ボタンを押したときの動作] の横のドロップダウンリストから [スリープ状態] を選択し、[変更の保存] をクリックする。  
    - 実施手順  
        電源ボタンを押す。
- 休止状態
    - 設定手順  
        [コントロールパネル > ハードウェアとサウンド > 電源オプション > 電源ボタンの動作を選択する] を選択する。
        [現在利用可能ではない設定を変更します] をクリックして設定変更可能にし、 [シャットダウン設定] の項にある[休止状態] のチェック ボックスをオンにし、[変更の保存] をクリックする。
    - 実施手順  
        [スタート] を 選択し 、[電源 > 休止状態] を選択する。
- 完全にオフ
    - 設定手順  
        特になし
    - 実施手順  
        [スタート] を 選択し 、[電源 > シャットダウン] を選択する。











## 利用可能なスリープ状態を確認する
PowerShell を起動して以下のコマンドを実行すると、利用可能なスリープ状態を確認する事ができる。
```sh
powercfg /a
```
実際に実行した例が以下。
```sh
PS C:\Users\MINASE> powercfg /a
以下のスリープ状態がこのシステムで利用可能です:
    スタンバイ (S3)
    休止状態
    ハイブリッド スリープ
    高速スタートアップ

以下のスリープ状態はこのシステムでは利用できません:
    スタンバイ (S1)
        システム ファームウェアはこのスタンバイ状態をサポートしていません。

    スタンバイ (S2)
        システム ファームウェアはこのスタンバイ状態をサポートしていません。

    スタンバイ (S0 低電力アイドル)
        システム ファームウェアはこのスタンバイ状態をサポートしていません。
```


# Wol の設定方法(サーバー側)






# WoL の実行方法(クライアント側)

## RedHat系Linux（Fedora,CentOS)
現状では、以下の2つのコマンドが提供されている。
パッと見た感じだと、`wol` コマンドの方が利用可能なオプションが豊富なため、色々と融通が利くのかもしれない。
利用する場合は、基本的にどちらも `ether-wake <MACaddress>` や `wol <MACaddress>` という具合にコマンドを叩く。

- `ether-wake` コマンド  
    標準リポジトリ内の `net-tools` パッケージに含まれるコマンド。  
    ```sh
    [minase@nebula ~]$ which ether-wake
    /usr/sbin/ether-wake
    [minase@nebula ~]$ rpm -qf /usr/sbin/ether-wake
    net-tools-2.0-0.64.20160912git.fc37.x86_64
    ``` 
    `man ether-wake` や `ether-wake -u` で利用可能なオプションを確認可能。  
    利用可能なオプションは、以下。  
    - `-b`  
        マジックパケットをブロードキャストアドレスに送信する。  
    - `-D`  
        デバッグレベルを指定する。  
    - `-i ifname`  
        送信対象のネットワークデバイスを指定する。  
    - `-p passwd`  
        パスワードを指定する。  
    - `-V`  
        バージョンを表示する  


- `wol` コマンド  
    epel リポジトリ内の `wol` パッケージに含まれるコマンド。  
    ```sh
    [minase@nebula ~]$ which wol
    /usr/bin/wol
    [minase@nebula ~]$ rpm -qf /usr/bin/wol
    wol-0.7.1-29.fc37.x86_64
    ``` 
    `man wol` や `wol --help` で利用可能なオプションを確認可能。  
    利用可能なオプションは、以下。  
    - `--help`  
        ヘルプを表示する
    - `-V`, `--version`  
           バージョンを表示する
    - `-h HOST`, `--host=HOST`, `-i HOST`, `--ipaddr=HOST`  
        WoL対象のホストをホスト名 または IPアドレスで指定する  
        `--ipaddr` も `--host` と同じ効果らしい。  
    - `-b HOST`,  `--bind=HOST`  
           Bind to this IP address or hostname.  
           This allows broadcasting on multihomed hosts by specifying the IP address of the desired outgoing interface.
    - `-p NUM`, `--port=NUM`  
        キャストするUDPポートを指定する。デフォルトは40000。  
    - `-f FILE`, `--file=FILE`, `-`  
           ハードウェアアドレスやIPアドレス(ホスト名)、ポート番号などの情報を指定したファイルから取得する。  
           `-` を指定した場合は標準入力(他の操作からのパイプなど)から取得する。  
    - `-v`, `--verbose`  
        処理の詳細を表示する。  
    - `-w NUM`, `--wait=NUM`  
        マジックパケットを送信してから指定されたミリ秒待つ。  
    - `--passwd[=PASS]`  
        パスワードを指定する。  
        パスワードは `ethtool` 等で設定できるとのこと。  







# 参考URL

- [PC をシャットダウン、スリープ、休止状態にする]( https://support.microsoft.com/ja-jp/windows/pc-%E3%82%92%E3%82%B7%E3%83%A3%E3%83%83%E3%83%88%E3%83%80%E3%82%A6%E3%83%B3-%E3%82%B9%E3%83%AA%E3%83%BC%E3%83%97-%E4%BC%91%E6%AD%A2%E7%8A%B6%E6%85%8B%E3%81%AB%E3%81%99%E3%82%8B-2941d165-7d0a-a5e8-c5ad-8c972e8e6eff )














